<div class="flex lg:flex-row flex-col bg-gray-100 rounded-2xl mb-1 overflow-hidden items-stretch <%= classes %>">
  <div class="flex flex-row md:items-center justify-between lg:max-w-sm w-full">
    <div class="flex-1 flex flex-col items-start justify-between py-2 md:pb-2 pb-0 pl-4 pl md:pr-1">
        <span>
          <% if place.commercial? %>
          <span class="uppercase text-xs px-2 py-1 rounded bg-yellow-500 font-bold text-white"><%= t(:commercial) %></span>
          <% end %>
          <%= place.title %>
        </span>
      <%= link_to place.address, place.map_url, target: '_blank', class: 'text-sm' %>
    </div>
    <div class="flex-0 w-32 flex justify-center items-center">
      <% if place.supports_reservation %>
        <div class="px-2 md:py-4 py-2 flex items-end justify-end">
          <div class="inline-flex rounded-md shadow">
            <%= link_to t(:make_reservation), place.final_reservations_url || @default_make_reservation_url, target: '_blank', class: 'inline-flex items-center justify-center px-3 py-2 text-sm border border-transparent text-base text-center font-medium rounded-md text-white bg-green-600 hover:bg-green-700 hover:text-white' %>
          </div>
        </div>
      <% else %>
        <div class="px-2 md:py-4 py-2 flex items-end justify-end">
          <div class="inline-flex rounded-md shadow">
            <%= link_to t(:more_info), place.final_reservations_url || @default_make_reservation_url, target: '_blank', class: 'inline-flex items-center justify-center px-3 py-2 text-sm border border-transparent text-base text-center font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 hover:text-white' %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="flex w-full md:overflow-hidden overflow-scroll">
    <% plan_dates.map do |plan_date| %>
      <% latest_snapshot, snapshot = place.latest_snapshot_at(plan_date) %>
      <div class="w-full flex flex-col items-center md:justify-center justify-between p-2 bg-opacity-60 bg-gray-100 <%= cell_classes(place, latest_snapshot, snapshot, plan_date) %>">
        <div class="text-xs text-center md:hidden block flex flex-col">
          <span><%= l plan_date.date, format: '%a' %></span>
          <span><%= l plan_date.date, format: '%d %b' %></span>
        </div>
        <div class="flex items-center justify-center md:mt-0 mt-2">
          <% if place.supports_reservation %>
            <% if snapshot.nil? %>
              <span title="<%= t(:unknown) %>" class="text-gray-500">
                ?
              </span>
            <% elsif !latest_snapshot.enabled %>
              <span title="<%= t(:locked) %>" class="text-yellow-600">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="inline fill-current" width="18px" height="18px"><path d="M0 0h24v24H0z" fill="none"/><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
              </span>
            <% elsif snapshot.is_closed %>
              <span title="<%= t(:closed) %>" class="text-red-500">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="inline fill-current" width="18px" height="18px"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"/></svg>
              </span>
            <% else %>
              <%= snapshot.free_capacity >= 0 ? snapshot.free_capacity : 0 %>
            <% end %>
          <% else %>
            <% if plan_date.date == Date.today %>
            <span class="text-yellow-600 text-xs text-center">
              <%= t(:wait_time) %>
              <%= place.queue_wait_time %>
            </span>
            <% else %>
              <span></span>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
